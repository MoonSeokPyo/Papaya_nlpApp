<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="globals.css">
	<link rel="stylesheet" href="styleguide.css">
	<link rel="stylesheet" href="/css/find-password-style.css">
	<title>비밀번호 찾기</title>
</head>

<body>
	<div class="desktop">
		<div class="container">
			<div class="overlap-group">
				<h2 class="page-title">비밀번호 찾기</h2>
				<form th:action="@{/user/find-password}" method="post" id="findPasswordForm">
					<div class="input-group">
						<label for="email">Id :</label>
						<input type="text" name="email" id="email" required style="border:none">
					</div>
					<div class="input-group">
						<label for="name">이름 :</label>
						<input type="text" name="name" id="name" required style="border:none">
					</div>
					<div class="input-group">
						<label for="phone">전화번호 :</label>
						<input type="text" name="phone" id="phone" required style="border:none">
					</div>
					<button type="submit" class="find-password-button">비밀번호 찾기</button>
				</form>
			</div>
			<img class="home-icon" src="/img/Papaya.png" alt="Home" onclick="navigateToPage('/')">
		</div>
	</div>
	<script src="/js/mainscript.js"></script>
	<script>
		document.querySelector('.find-password-button').addEventListener('click', function(event) {
		    event.preventDefault();

		    const formData = new FormData(document.querySelector('form'));
		    fetch('/user/find-password', {
		        method: 'POST',
		        body: new URLSearchParams(formData)
		    })
		    .then(response => response.json().then(data => ({ status: response.status, body: data })))  // 응답을 객체로 반환
		    .then(({ status, body }) => {
		        alert(body.message);  // 메시지를 alert로 표시
		        if (status === 200) {
		            window.location.href = '/';  // 성공 시 메인 페이지로 이동
		        }
		    })
		    .catch(error => alert('오류가 발생했습니다. 다시 시도하세요.'));
		});
	</script>
</body>

</html>